function VizPaginator(t,e,a){if(this.ee=new EventEmitter,this.memoMap=new Map,this.$pagination=$(t),this.$content=$(e),this.$prevButton=$(this.$pagination.children(".viz-page-prev")[0]),this.$nextButton=$(this.$pagination.children(".viz-page-next")[0]),this.$prevGroupButton=$(this.$pagination.children(".viz-page-prev-group")[0]),this.$nextGroupButton=$(this.$pagination.children(".viz-page-next-group")[0]),this.$pages=this.$pagination.children("li:not(.viz-page-prev):not(.viz-page-next):not(.viz-page-prev-group):not(.viz-page-next-group)"),this.baseUrl=a.baseUrl,this.getTotalItemCountOpt=a.getTotalItemCount,this.getRangeOfItemsOpt=a.getRangeOfItems,this.maxItemCount=a.maxItemCount?a.maxItemCount:3,this.maxPageCount=a.maxPageCount?a.maxPageCount:5,!(this.baseUrl||this.getTotalItemCountOpt&&this.getRangeOfItemsOpt))throw"You should pass either baseUrl or (getTotalItemCountOpt and getRangeOfItemsOpt)!";this.getTotalItemCountAjax=this.createGetTotalItemCountAjax(this.getTotalItemCountOpt.url,this.baseUrl,this.getTotalItemCountOpt.parser,this.getTotalItemCountOpt.fail),this.getRangeOfItemsAjax=this.createGetRangeOfItemsAjax(this.getRangeOfItemsOpt.url,this.baseUrl,this.getRangeOfItemsOpt.parser,this.getRangeOfItemsOpt.done,this.getRangeOfItemsOpt.fail),this.init()}$(function(){var t=$("#single-todo").html(),e=$("#multiple-todo").html();Handlebars.registerPartial("singleTodo",t);var a=Handlebars.compile(e);new VizPaginator(".pagination","#content",{getTotalItemCount:{url:"http://128.199.76.9:8002/viz/todo/count",parser:function(t){return t.cnt}},getRangeOfItems:{url:"http://128.199.76.9:8002/viz/todo/page?start={{0}}&limit={{1}}",done:function(t){var e=a({todos:t});$("#content").text(""),$(e).appendTo($("#content"))}}})}),VizPaginator.prototype.init=function(){this.currentPageGroup=1,this.$pages.on("click",this.pageOnClickCallback.bind(this)),this.$prevButton.on("click",this.prevOnClickCallback.bind(this)),this.$nextButton.on("click",this.nextOnClickCallback.bind(this)),this.$prevGroupButton.on("click",this.prevGroupOnClickCallback.bind(this)),this.$nextGroupButton.on("click",this.nextGroupOnClickCallback.bind(this)),this.ee.addListener("move",this.pageChangedCallback.bind(this)),this.getTotalItemCountAjax(),this.changePage(1)},VizPaginator.prototype.createGetTotalItemCountAjax=function(t,e,a,n){return function(){$.ajax(t||e+"/count").done(function(t){this.totalItemCount=a?a(t):t.count,this.totalPageCount=Math.ceil(this.totalItemCount/this.maxItemCount),this.enableOrDisablePageButtons(),1===this.totalPageCount&&this.disableButton(this.$nextButton)}.bind(this)).fail(n||function(){alert("Server request failed!\nPlease check your network status and reload the page.")})}.bind(this)},VizPaginator.prototype.createGetRangeOfItemsAjax=function(t,e,a,n,i){return this.getRangeOfItemsAjaxDoneCallback=n||function(t){for(var e=a||function(t,e){return t[e].content},n=0;n<t.length;n++)this.$content.children("li:nth-child("+(n+1)+")").text(e(t,n));for(var i=t.length;i<this.maxItemCount;i++)this.$content.children("li:nth-child("+(i+1)+")").text("")}.bind(this),function(a,n,o){var s=t||e+"/page?start={{0}}&limit={{1}}";$.ajax(s.replace("{{0}}",a).replace("{{1}}",n)).done(function(t){this.memoMap.set(o,t),this.getRangeOfItemsAjaxDoneCallback(t)}.bind(this)).fail(i||function(){alert("Server request failed!\nPlease check your network status and reload the page.")})}.bind(this)},VizPaginator.prototype.disableButton=function(t){t.children("a").attr("disabled","")},VizPaginator.prototype.enableButton=function(t){t.children("a").removeAttr("disabled")},VizPaginator.prototype.isButtonEnabled=function(t){return!t.children("a").attr("disabled")},VizPaginator.prototype.enableOrDisablePageButtons=function(){var t=this.totalPageCount-(this.currentPageGroup-1)*this.maxPageCount,e=this.maxPageCount*this.currentPageGroup;if(t>=this.maxPageCount)for(var a=0;a<this.maxPageCount;a++)this.enableButton($(this.$pages[a]));else{for(var n=0;n<t;n++)this.enableButton($(this.$pages[n]));for(var i=t;i<e;i++)this.disableButton($(this.$pages[i]))}},VizPaginator.prototype.pageChangedCallback=function(t){1===t.index?this.disableButton(this.$prevButton):this.enableButton(this.$prevButton),t.index-this.maxPageCount<1?this.disableButton(this.$prevGroupButton):this.enableButton(this.$prevGroupButton),t.index===this.totalPageCount?this.disableButton(this.$nextButton):this.enableButton(this.$nextButton),t.index+this.maxPageCount>this.totalPageCount?this.disableButton(this.$nextGroupButton):this.enableButton(this.$nextGroupButton)},VizPaginator.prototype.pageOnClickCallback=function(t){if(t.preventDefault(),this.isButtonEnabled($(t.target))){var e=Number($(t.target).text());this.changePage(e)}},VizPaginator.prototype.prevOnClickCallback=function(t){t.preventDefault(),this.isButtonEnabled($(t.target))&&this.changePageRelatively(-1)},VizPaginator.prototype.nextOnClickCallback=function(t){t.preventDefault(),this.isButtonEnabled($(t.target))&&this.changePageRelatively(1)},VizPaginator.prototype.prevGroupOnClickCallback=function(t){t.preventDefault(),this.isButtonEnabled($(t.target))&&this.changePageRelatively(-this.maxPageCount)},VizPaginator.prototype.nextGroupOnClickCallback=function(t){t.preventDefault(),this.isButtonEnabled($(t.target))&&this.changePageRelatively(this.maxPageCount)},VizPaginator.prototype.changePageRelatively=function(t){var e=Number(this.$currentActive.text())+t;this.changePage(e)},VizPaginator.prototype.changePage=function(t){var e=$(this.$pages[0]).text(),a=$(this.$pages[this.maxPageCount-1]).text();t<e?this.changePageGroup(-1):t>a&&this.changePageGroup(1);var n=this.memoMap.get(t);n?this.getRangeOfItemsAjaxDoneCallback(n):this.changeContent(t),this.$currentActive&&this.$currentActive.removeClass("active");var i=t-this.maxPageCount*(this.currentPageGroup-1)-1;this.$currentActive=$(this.$pages[i]),this.$currentActive.addClass("active"),this.ee.emit("move",{index:t,max:this.totalPageCount})},VizPaginator.prototype.changeContent=function(t){var e=(t-1)*this.maxItemCount,a=this.maxItemCount;this.getRangeOfItemsAjax(e,a,t)},VizPaginator.prototype.changePageGroup=function(t){this.currentPageGroup+=t;for(var e=0;e<this.maxPageCount;e++){var a=$(this.$pages[e]).children("a"),n=Number(a.text())+t*this.maxPageCount;a.text(n)}this.enableOrDisablePageButtons()},VizPaginator.prototype.on=function(t,e){this.ee.addListener(t,e)},VizPaginator.prototype.off=function(t,e){this.ee.removeListener(t,e)};